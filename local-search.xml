<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>关于fluid打字机问题的解决记录</title>
    <link href="/2025/11/24/%E5%85%B3%E4%BA%8Efluid%E6%89%93%E5%AD%97%E6%9C%BA%E9%97%AE%E9%A2%98%E7%9A%84%E8%A7%A3%E5%86%B3%E8%AE%B0%E5%BD%95/"/>
    <url>/2025/11/24/%E5%85%B3%E4%BA%8Efluid%E6%89%93%E5%AD%97%E6%9C%BA%E9%97%AE%E9%A2%98%E7%9A%84%E8%A7%A3%E5%86%B3%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<p>解决了一个在配置博客时遇到的关于fluid中首页标题使用打字机随机选择的问题，过程记录于此~</p><span id="more"></span><h2 id="问题起因："><a href="#问题起因：" class="headerlink" title="问题起因："></a>问题起因：</h2><p>​配置博客时需要给博客整个标题，看到标题可以做成打字机(slogan)形式，也就是会缓缓把内容一个字一个字显示出来的形式，于是就启用了这个功能，随即看到如下所示的设置，于是我满怀欣喜的加入了随机选择功能，下文中的text就是我首页目前随机显示的内容。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># 首页副标题的独立设置</span><br><span class="hljs-comment"># Independent config of home page subtitle</span><br><span class="hljs-attr">slogan:</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br><br>  <span class="hljs-comment"># 为空则按 hexo config.subtitle 显示，支持列表格式来实现随机选择一行文字显示</span><br>  <span class="hljs-comment"># If empty, text based on `subtitle` in hexo config, support list format to random selection of a row for display</span><br>  <span class="hljs-comment"># 替换了原来的多行格式</span><br>  <span class="hljs-attr">text:</span> <br>    <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;为什么每一次点开都要被这玩意硬控一次&quot;</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;记录存在，记录这美好又不美好的每一天&quot;</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;泥泞的下水道倒映着漫天星光&quot;</span><br></code></pre></td></tr></table></figure><p>​哎，您猜怎么着，居然首页把上面text中的所有内容全部显示出来啦（现在复现问题需要我回溯文件，但是我是懒鬼😭），也就是说直接在博客首页显示了：</p><p>“为什么每一次点开都要被这玩意硬控一次记录存在，记录这美好又不美好的每一天泥泞的下水道倒映着漫天星光”</p><p>​这么长的一段话，真的很抽象。</p><h2 id="问题一阶段"><a href="#问题一阶段" class="headerlink" title="问题一阶段"></a>问题一阶段</h2><p>​于是寻找原因和解决方法。我首先拿着单页配置文件问了AI，AI表示：这是因为我输入的时候用了tab键，要换成空格，实在不行就不用空格直接用[….]的格式。</p><p>​试了很多次，没用。</p><p>​随查看项目的issue，看看有没有和我一样碰到问题的人，一看还真有：<a href="https://github.com/fluid-dev/hexo-theme-fluid/issues/1223">slogan随机选择写法</a>，但是没人回答，遂继续研究。</p><p>​在查看项目文件的时候，突然发现最新的release是1.9.8，日期是2024年的，而最新的，刚刚更新支持slogan随机选择的<code>_config.yml</code>文件，是6个月前，也就是25年5月份的。这让我有了个想法，是不是发行版还不支持这个功能？</p><p>​于是顺藤摸瓜，找到了fluid库中新支持slogan随机选择的文件<a href="https://github.com/fluid-dev/hexo-theme-fluid/blob/master/layout/_partials/plugins/typed.ejs">typed.ejs</a>，和本地的<code>typed.ejs</code>一比对，果然不一样。（本地的位于：<code>根目录\node_modules\hexo-theme-fluid\layout_partials\plugins\typed.ejs</code>）</p><p>​于是将本地文件更新为这个还未发布的最新文件，效果就像你们现在所看到的我的博客的目录一样啦<del>可以随机显示一段文字</del></p><h2 id="问题二阶段"><a href="#问题二阶段" class="headerlink" title="问题二阶段"></a>问题二阶段</h2><p>​上文都写着问题一阶段了，那当然有问题二阶段😭，我将一阶段的问题整理后回复给了提出那个issue的朋友，没想到没过几天那位朋友就发现了新的问题：换成最新的文件之后所有的页面标题都变成了随机显示的文字了😭。效果如下，这篇博客是我用来测试博客功能的那篇博客，可以看到中间应该显示标题的地方显示的是“为什么每一次点开都要被这玩意硬控一次”。</p><img src="/2025/11/24/%E5%85%B3%E4%BA%8Efluid%E6%89%93%E5%AD%97%E6%9C%BA%E9%97%AE%E9%A2%98%E7%9A%84%E8%A7%A3%E5%86%B3%E8%AE%B0%E5%BD%95/image-20251124151740464.png" class="" title="image-20251124151740464"><p>​天塌了，那怎么行，遂重新开始研究问题所在。首先从配置文件下手，观察配置文件，如下所示：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># 一些好玩的功能</span><br><span class="hljs-comment"># Some fun features</span><br><span class="hljs-attr">fun_features:</span><br>  <span class="hljs-comment"># 为 subtitle 添加打字机效果</span><br>  <span class="hljs-comment"># Typing animation for subtitle</span><br>  <span class="hljs-attr">typing:</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>    <br><br>    <span class="hljs-comment"># 打印速度，数字越大越慢</span><br>    <span class="hljs-comment"># Typing speed, the larger the number, the slower</span><br>    <span class="hljs-attr">typeSpeed:</span> <span class="hljs-number">70</span><br><br>    <span class="hljs-comment"># 游标字符</span><br>    <span class="hljs-comment"># Cursor character</span><br>    <span class="hljs-attr">cursorChar:</span> <span class="hljs-string">&quot;~&quot;</span><br><br>    <span class="hljs-comment"># 是否循环播放效果</span><br>    <span class="hljs-comment"># If true, loop animation</span><br>    <span class="hljs-attr">loop:</span> <span class="hljs-literal">false</span><br><br>    <span class="hljs-comment"># 在指定页面开启，不填则在所有页面开启</span><br>    <span class="hljs-comment"># Enable in specified page, all pages by default</span><br>    <span class="hljs-comment"># Options: home | post | tag | category | about | links | page | 404</span><br>    <span class="hljs-attr">scope:</span> []<br></code></pre></td></tr></table></figure><p>​看到底下有在指定页面开启的功能，大喜过望，遂立即填入home，想只在主页开启随机功能😋。修改后果然有效，但是其他所有页面的打字机效果不见了😡，全部变成了静态显示，没有一个字一个字显示的效果了。</p><p>​正好能够分析整个项目的ai配置好了，把整个项目丢给它让它分析，结果没想到还真有效果：</p><p>​<em>Github copliot: 根据你的问题描述和当前工作区的内容，问题的根源在于 <code>typed.ejs</code> 文件的逻辑未正确区分首页和文章页，导致随机 Slogan 的打字效果在文章页也被应用。</em></p><p>​遂分析<code>typed.ejs</code>文件，简单来说它的逻辑如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;% <span class="hljs-keyword">if</span> (<span class="hljs-title function_">is_home</span>() &amp;&amp; theme.<span class="hljs-property">index</span>.<span class="hljs-property">slogan</span>.<span class="hljs-property">api</span> &amp;&amp; theme.<span class="hljs-property">index</span>.<span class="hljs-property">slogan</span>.<span class="hljs-property">api</span>.<span class="hljs-property">enable</span>) &#123; %&gt;<br>   <span class="hljs-comment">// 逻辑 A: 调用了API的逻辑~</span><br>   ...<br>&lt;% &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(theme.<span class="hljs-property">index</span>.<span class="hljs-property">slogan</span>.<span class="hljs-property">text</span>) &amp;&amp; theme.<span class="hljs-property">index</span>.<span class="hljs-property">slogan</span>.<span class="hljs-property">text</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) &#123; %&gt;<br>   <span class="hljs-comment">// 逻辑 B: 配置了数组时，无论是哪个页面，都是随机显示</span><br>   ...<br>&lt;% &#125; <span class="hljs-keyword">else</span> &#123; %&gt;<br>   <span class="hljs-comment">// 逻辑 C: 其他情况（包括文章页），显示传入的 text (即标题)</span><br>   <span class="hljs-title function_">typing</span>(text);<br>&lt;% &#125; %&gt;<br></code></pre></td></tr></table></figure><p>​原来是逻辑B出现了问题，那就好说了，对逻辑B加上对是否是主页的判断就可以了，最后解决方法就是在逻辑B中加入了个is_home判断。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">/* ↓↓↓ 注意这里加上了 is_home() &amp;&amp; ↓↓↓ */</span><br>&lt;% &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-title function_">is_home</span>() &amp;&amp; <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(theme.<span class="hljs-property">index</span>.<span class="hljs-property">slogan</span>.<span class="hljs-property">text</span>) &amp;&amp; theme.<span class="hljs-property">index</span>.<span class="hljs-property">slogan</span>.<span class="hljs-property">text</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) &#123; %&gt;<br></code></pre></td></tr></table></figure><p>​最后完美解决，当然，也不能说完美，如果有人想在其他页也实现随机显示的话，就需要继续修改代码逻辑，但是考虑到在配置文件中，随机显示的功能是放在首页下的，所以我也没有再多修改功能和逻辑，毕竟对我来说这么大的项目改得越多越可能出错，更何况是这么小的功能。</p><h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>​已经提交了pr，这件事之前没怎么用过github的代码仓库维护功能的我还算是一次不错的历练，也希望自己在技术上能够更快更多的成长，毕竟前面的日子我欠下了太多~</p><p>​最后祝读到这篇文章的你天天开心~</p>]]></content>
    
    
    <categories>
      
      <category>小问题的解决</category>
      
    </categories>
    
    
    <tags>
      
      <tag>杂七杂八</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>测试各种功能的第一篇博客</title>
    <link href="/2025/11/18/%E6%B5%8B%E8%AF%951/"/>
    <url>/2025/11/18/%E6%B5%8B%E8%AF%951/</url>
    
    <content type="html"><![CDATA[<p>顺路测试下摘要效果</p><span id="more"></span><h1 id="这是个很大的一级标题"><a href="#这是个很大的一级标题" class="headerlink" title="这是个很大的一级标题"></a>这是个很大的一级标题</h1><p>好好好，好像还算正常</p><p>插入个图片：</p><img src="/2025/11/18/测试1/demo01.jpg"  style="zoom:50%;" /><p>如上所示，这是我本科时候的一个课程，老师在一堆题目里面出了个这个，笑死我了。</p>]]></content>
    
    
    <categories>
      
      <category>想到哪写到哪</category>
      
    </categories>
    
    
    <tags>
      
      <tag>杂七杂八</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2025/11/18/hello-world/"/>
    <url>/2025/11/18/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
